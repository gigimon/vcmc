# Step 4: Базовый UI (две панели)

## Цель
Собрать полноценный двухпанельный интерфейс с явными визуальными состояниями и без лишних перерисовок.

## Решения
- Переработать `src/ui.rs`:
  - header с активной панелью, размером терминала и счетчиками jobs;
  - две панели с выделением активной, списком элементов и скролл-окном;
  - status bar и help bar.
- Добавить состояния панели:
  - normal list state;
  - empty directory;
  - error state на уровне панели.
- Переключить redraw-стратегию:
  - начальный draw один раз;
  - последующие redraw только при изменении состояния (`on_event -> bool`).

## Checklist
[x] Собрать layout: header, две панели, status bar, help bar.
[x] Реализовать визуальные состояния: активная панель, выделение, пустой каталог, ошибка.
[x] Добавить адаптацию к resize терминала.
[x] Настроить компактный рендер без лишних перерисовок состояния.

## Прогресс
- 2026-02-12: step создан.
- 2026-02-12: переработан `src/ui.rs` с выделением активной панели, списком файлов, статусом jobs и help bar.
- 2026-02-12: добавлено состояние `error_message` в `PanelState` и визуализация ошибок/пустого каталога.
- 2026-02-12: главный цикл обновлен до event-driven redraw (`on_event -> bool`), убраны лишние перерисовки на idle ticks.
- 2026-02-12: `cargo fmt` и `cargo check` проходят успешно.
